create schema if not exists personaldietarydb;

create table if not exists foodgroup
(
    foodgroup_id int not null
        primary key,
    foodgroup_name varchar(20) not null
);

create table if not exists meal
(
    meal_id int auto_increment
        primary key,
    meal_name varchar(20) not null
);

create table if not exists type
(
    type_id int auto_increment
        primary key,
    type_name varchar(20) not null
);

create table if not exists retailer
(
    retailer_id int auto_increment
        primary key,
    retailer_name varchar(50) not null
);

create table if not exists dining
(
    dining_id int auto_increment
        primary key,
    dining_name varchar(20) not null,
    time datetime null,
    foodgroup_id int not null,
    meal_id int not null,
    isConsumed tinyint(1) null,
    retailer_id int not null,
    type_id int not null,
    constraint dining_ibfk_1
        foreign key (foodgroup_id) references foodgroup (foodgroup_id),
    constraint dining_ibfk_2
        foreign key (meal_id) references meal (meal_id)
);

create table if not exists serving
(
    serving_id int auto_increment
        primary key,
    dining_id int not null,
    calories decimal(5,2) default 0.00 not null,
    fat decimal(5,2) default 0.00 not null,
    sodium decimal(5,2) default 0.00 not null,
    sugar decimal(5,2) default 0.00 not null,
    amount decimal(7,2) default 0.00 not null,
    constraint serving_dining_dining_id_fk
        foreign key (dining_id) references dining (dining_id)
            on delete cascade
);



